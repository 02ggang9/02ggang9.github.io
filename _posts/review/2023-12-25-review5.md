---
published: true
title:  "회고 - 2023.12.25 ~ 2023.12.31"
categories:
  - review
---

## 2023.12.26 (화)

- 한상곤 교수님과의 미팅

- Spring Batch를 활용한 대규모 메일링 서비스 제작 시작

겨울방학이 되고, 취업을 위해 준비해야 할 것들과 평소 기술적으로 궁금했던 부분을 교수님께 여쭤봤습니다. 그리고 BDD 모임에 관해서 이야기를 나누다가 명예회원(선배님)들에게 매달 어떤 활동을 했다고 전달하는 메일링 서비스를 만들면 좋겠다고 말씀해 주셨습니다. 평소 Spring Batch에 대해서도 궁금했고, BDD 내부적으로도 필요한 기능이라고 생각해 바로 레포를 파고 만들기 시작했습니다.

Spring Batch를 사용하게 된 이유는 단순히 교수님께서 언급하시기도 했고, Batch 기술을 사용하지 않으면 중간에 에러가 발생했을때 처리 과정이 매우 힘들다고 생각했습니다. Spring Batch는 중간에 에러가 발생했을때 복구할 수 있는 기능이 많고, 참고할 레퍼런스도 많아 선택하게 되었습니다.

Spring Batch에 관한 학습은 [정수원님의 스프링 배치 강의](https://www.inflearn.com/course/%EC%8A%A4%ED%94%84%EB%A7%81-%EB%B0%B0%EC%B9%98/dashboard)를 참고했습니다.

## 2023.12.27 (수)

- 정수원님의 Spring Batch 강의 수강

- Spring Batch를 활용한 대규모 메일링 서비스 제작

Spring Batch를 기반으로 데이터베이스를 읽고 사용자들의 정보를 출력해내는 코드를 작성했습니다. Job, Step, JobRepository 등의 도메인에 대해서 최소한으로 공부했습니다. 강의가 45시간이나 되어서 다 듣고 만들기에는 시간도 부족하고 답답했습니다.

데이터베이스에 있는 사용자들의 정보를 읽고 출력은 했지만 조금 아쉬운 부분이 있었습니다. Spring Batch에 맞는 테스트 코드 작성 방법을 몰라 포스트맨으로 일일이 확인해야 했습니다. 그리고 예외가 발생했을때 DB에 로그가 잘 찍히는지 확인하는 것도 번거롭게 느껴졌습니다.


## 2023.12.28 (목)

- Mail 발송 API 제작

- MIT 라이센스 등록

- Mail 발송 중 실패할 경우 Retry를 활용해서 처리하도록 수정

- 작성한 글을 HTML 형식으로 변경 (포맷팅) + 볼드체 지원

- 데이터베이스에 등록된 이메일 조회, 등록, 삭제 기능 추가

JavaMailSender를 이용해 DB에 등록된 사용자들에게 일괄적으로 메일을 보낼 수 있는 API를 제작했습니다. 발생한 문제는 MailAuthenticationException이 계속 발생했는데, 이 문제는 Google 계정의 보안 > 2단계 인증 완료 > 보안 키 등록을 함으로써 해결할 수 있습니다. 그리고 코드가 조금 지저분한데 이는 나중에 리팩토링 하기로 결정했습니다. 

MIT 라이센스는 교수님께서 수업시간에 누누이 말씀하셨기 때문에 이번 기회에 한번 등록해 봤습니다. 등록 과정은 [여기](https://ios-development.tistory.com/1325)에서 확인하실 수 있습니다. 굉장히 쉬워서 금방하실 수 있습니다.

Mail 발송 중 실패할 경우는 Retry를 통해서 간단하게 재발송하도록 결정했습니다. 이렇게 결정한 이유는 예외를 처리하기 위한 방법은 정말 여러가지 있는데 Retry를 해서 이메일을 재발송 하는 방법이 가장 간단하고 빠르게 기능을 만들 수 있을 것 같았기 때문입니다. 지금은 코드의 퀄리티에 신경쓰지 않고 빠르게 기능을 완성하는 것이 우선이라 생각했습니다.

기본적으로 볼드체 정도는 지원을 해야 가독성 있는 글을 작성할 수 있겠다고 생각해 간단한 포멧팅 기능을 만들었습니다. 공작발 시간에 교수님께서 하나의 글을 적으면 특정한 형태로 변형되는(예를 들어, md -> pdf) 사내 프로그램을 만드셨다고 하셨습니다. 저도 그런 문서 변환 프로그램을 만들어보고 싶다고 생각을 했는데 이번 기회에 만들어 봤습니다. 지금은 {} 안에 있는 글이 볼드체로 들어가게 만들었는데 md 형식으로 "#"을 사용해서 포맷팅하도록 수정할 예정입니다.

