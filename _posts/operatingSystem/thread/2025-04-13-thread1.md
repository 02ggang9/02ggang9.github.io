---
published: false
title:  "[운영체제] Thread & Concurrency"
categories:
  - operatingSystem
---

# 서론
요즘 Virtual Thread에 대해서 공부를 하고 있는데, Thread 부터 차근차근 공부를 해야겠다고 마음먹어서 전공 책을 피고 공부하고 있습니다.
Thread 라는 것을 개념적으로는 알고 있었지만 정확히 어떤 방식으로 동작하는지 구체적인 동작 과정은 하나도 모르고 있습니다.
이번에 공부할 때는 조금 딥다이브 해서 공부해보려고 합니다.

우선 전공 책에 적힌 개념을 다시 공부하고 직접 코드를 까보면서 Chat GPT와 함께 공부해보겠습니다.

# 스레드란?

스레드는 CPU 이용의 기본 단위입니다. 스레드는 스레드 ID, 프로그램 카운터, 레지스터 집합과 스택으로 구성됩니다.
또, 스레드는 자신이 속한 프로세스의 코드, 데이터, 힙, 열린 파일이나 신호와 같은 자원들을 공유합니다. 
흔히 프로세스의 자원들을 공유한다는 특성 때문에 멀티 스레드 프로그래밍이 멀티 프로세스 프로그래밍 보다 효율적이라고 알고 있습니다.

## 프로세스 VS 스레드

프로세스는 운영체제가 할당하는 독립된 자원(메모리, 네트워크 소켓 등)을 관리하는 실행 단위입니다. 
따라서 다른 프로세스와 다른 가상 주소 공간을 갖기 때문에 메모리 공유를 하지 않습니다.
이 때문에 하나의 프로세스가 다운되거나 영향을 미쳐도 다른 프로세스는 독립된 공간이기 때문에 치명적인 영향은 없습니다.

스레드 같은 경우에는 자신이 속한 프로세스의 자원을 공유하기 때문에 한 스레드가 다른 스레드의 작업에 영향을 끼칠 수 있습니다.
이 부분은 다음 챕터에서 자세히 알아보도록 하겠습니다.

## 멀티 스레드의 장점

1번째로 응답성이 높아진다는 것입니다.
예를 들어 싱글 스레드 프로그래밍을 한다면 클라이언트가 서버에게 요청을 보낼 때 하나의 클라이언트만 담당할 수 있습니다. 
요청에 대한 응답 시간이 길어진다면 다른 클라이언트들의 요청을 빠르게 응답할 수 없습니다.
하지만 멀티 스레드 프로그래밍을 한다면 여러 클라이언트의 요청을 계속해서 받을 수 있다는 장점이 있습니다.

2번째로 경제적이다는 것입니다.
스레드는 자신이 속한 프로세스에 자원을 공유하기 때문에 멀티 프로세스 프로그래밍 보다 효율적입니다. 
프로세스 생성을 위해 별도의 메모리를 할당하고 문맥을 교환하는 비용이 멀티 스레드 보다 훨씬 비용이 큽니다.

### 어떤 면에서 경제적이고 어떤 면에서 비용이 줄까?

프로세스를 생성 할 때는 독립적인 주소 공간(코드, 데이터, 스택 등)을 만들어야 하는데, 
스레드는 프로세스의 주소 공간을 그대로 사용하고 독립적인 스택과 레지스터와 같은 최소한의 컨텍스트를 유지하는 것만 준비하면 됩니다.

따라서 메모리 측면에서 경제적이고 최소한의 컨텍스트를 유지하기 위한 정보인 스택, 프로그램 카운터, 레지스터 등의 정보만 문맥 교환을 하면 되기 때문에
프로세스 보다 상대적으로 비용이 줄게 됩니다.



# 결론