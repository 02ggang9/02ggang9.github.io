---
published: false
title: "Effective Java Item 6 - 불필요한 객체 생성을 피하라"
categories:
  - Java
---

---

정규식 같은 경우는 만드는데 비용이 조금 비쌈. 패턴 matches()를 할 때 정규표현식을 받고 내부적으로 컴파일을 하고 패턴 인스턴스를 만드는 과정이 조금 오래걸림. 그런데 계속 인스턴스를 생성하면 비효율적이다. 그래서 패턴이 정규표현식이고 자주 사용된다면 필드로 선언을 해서 사용하는 것을 권장한다.

유한 상태머신 -> 문자열을 비교하는 알고리즘이 유한 상태 머신 머시기임

---

오토박싱 -> 계속 인스턴스를 생성하는 거임..

---
완벽 공략

1. 피치 못할 사정으로 API를 변경해야 하는 상황이 있을 수 있다. 언제가는 사라질 테니까 사용을 권장하지 않는 경우고 유도할 수 있을 경우 Deprecation을 사용할 수 있다.

2. 정규 표현식이 사용되는 곳이 어딘지 알아야지 Spring의 matches 등 어딘지 알아야지 불필요한 객체 생성을 피할 수 있음.

3. 가비지 컬렉션 대상이 된다. 가비지 컬렉션 역시 전부다 살펴보지 않고 

---
Deprecation

한번쯤은 디플리케이트 된 코드를 본적이 있을 것이다. API가 변경되는 경우에 클라이언트에게 알려줄 수 있다.

가령 성능 문제가 생겼거나, 더 좋은 코드로 변경하는 경우 

애노테이션 프로세서에 대해서 공부해보기
컴파일 타임에 애노테이션을 처리함. 애노테이션 프로세서를 통해서 컴파일 경고 메시지를 보내줌.
삭제될 코드(더 강력하게 표현) -> (forRemoval = true)
언제부터 삭제가 된거냐 since = "1.2"
왜 디플리케이트 된 건지 알려주려면 @deprecated를 써야함. 대소문자 구분함
spring docs에 디플리케이트 찾아보기

---
2. 정규 표현식
matches

split
차이가 한글자일때 그냥 split을 쓰는게 더 빠르다. 내부적으로 fastPatch를 사용함.
한 글자가 아닌 경우 패턴을 재사용하는 것이 더 빠르다. 패턴을 캐쉬해서 쓰는것이다.

replcace
replcaceAll
replcaceFirst

---

가비지 컬렉션
메서드에서 한번 만들어지고 끝날 때 바로 가비지 컬렉션 대상이 되는거임

Mark, Sweep, Compact
Young Generation, Old Generation
Minor GC, Full GC
Stop The World

